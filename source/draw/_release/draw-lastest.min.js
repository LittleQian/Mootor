(function(c){var a=function(d){b.init(this,d);return this};a.prototype={clear:function(){var d=this.ctx,e=this.canvasElement;d.save();d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,e.width,e.height);d.beginPath();d.restore()}};var b={init:function(d,e){d.el=e.el;d.canvasElement=b.createCanvas(d);b.setAttributes(d.canvasElement,e);d.ctx=d.canvasElement.getContext("2d");b.addEventListeners(d)},createCanvas:function(e){var d=document.createElement("canvas");c(d).setClass("moo-draw-canvas");e.el.appendChild(d);return d},setAttributes:function(e,d){if(d.width!==undefined){e.setAttribute("width",d.width)}if(d.height!==undefined){e.setAttribute("height",d.height)}},addEventListeners:function(g){var h=g.canvasElement,e=g.ctx,f=h.offsetLeft,d=h.offsetTop;c(h).on("touchend",function(i){i.stopPropagation();i.preventDefault()});c(h).on("touchmove",function(i){i.stopPropagation();i.preventDefault()});c(h).onDragMove(function(j){var i,m,l,k;l=j.lastX-f;k=j.lastY-d;i=j.x-f;m=j.y-d;e.moveTo(l,k);e.lineTo(i,m);e.stroke()});c(h).on("touchend",function(j){var i=j.changedTouches[0].pageX-f,k=j.changedTouches[0].pageY-d;e.moveTo(i-1,k-1);e.lineTo(i,k);e.stroke();e.moveTo(i+1,k+1);e.lineTo(i,k);e.stroke();e.moveTo(i-1,k+1);e.lineTo(i,k);e.stroke();e.moveTo(i+1,k-1);e.lineTo(i,k);e.stroke()})}};c.extend({drawArea:function(d){if(d===undefined){d={}}d.el=this.el;return new a(d)}})}(Mootor));