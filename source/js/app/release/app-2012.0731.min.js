(function(b){var a=function(d){a.init(d,this);return this},c=function(f,h){var g=this.el=f.el,e=this,d;if(f.el.id!==undefined){this.id=f.el.id}h.views.push(this);if(f.nav!==undefined){d=f.nav.get(this.id);d.onLoad=function(){if(e.cached===false){h.load(this,{nav:d})}}}this.cached=false;return this};a.prototype={load:function(d,f){var g=function(){},e="";if(f.callback!==undefined){g=f.callback}else{g=function(h){if(d.cached!==true){d.cached=true;if(f.el!==undefined){b(f.el).html(h)}else{b(d.el).html(h)}}if(f.nav!==undefined&&typeof f.nav.onLoadCallback==="function"){f.nav.onLoadCallback()}}}e=this.path+"/"+d.id+"/"+d.id;b.ajax({url:e+".html",callback:g});b.require(e+".js")}};b.extend({_collection:[],init:function(m,l){var f,g,d=window.location.href,h,j,e,k;if(m.id!==undefined){l.id=m.id}if(m.path!==undefined){l.path=m.path}else{l.path=""}l.views=[];if(m.views!==undefined){for(f=0;f<m.views.length;f++){h=new c({el:b("#"+m.views[f]).el,id:m.views[f],nav:m.nav},l)}}a._collection.push(l);if((g=d.lastIndexOf("#"))>-1){j=d.substring(g,d.length).replace("#","");if(j!==undefined){m.nav.set(j)}}},get:function(d){return a._collection.map(function(e){if(e.id===d){return e}})[0]}},a);b.extend({app:function(d){if(typeof d!=="object"){d={}}d.el=this.el;switch(d.type){default:return new a(d)}}},b);b.extend({app:function(d){return a.get(this.query)}})}(Mootor));