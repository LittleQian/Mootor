(function(b){var a=function(d){a.init(d,this);return this},c=function(f,h){var g=this.el=f.el,e=this,d;if(f.el.id!==undefined){this.id=f.el.id}h.views.push(this);if(f.nav!==undefined){d=f.nav.get(this.id);d.onLoad=function(){if(e.cached===false){h.load(this,{nav:d})}}}this.cached=false;return this};a.prototype={load:function(d,e){var f=function(){};if(e.callback!==undefined){f=e.callback}else{f=function(g){if(d.cached!==true){d.cached=true;if(e.el!==undefined){b(e.el).html(g)}else{b(d.el).html(g)}}if(e.nav!==undefined&&typeof e.nav.onLoadCallback==="function"){e.nav.onLoadCallback()}}}b.ajax({url:this.path+"/"+d.id+"/"+d.id+".html",callback:f});b.require(this.path+"/"+d.id+"/"+d.id+".js")}};b.extend({init:function(j,h){var k,e,g=window.location.href,f,d,l;h.views=[];if(j.path!==undefined){h.path=j.path}else{h.path=""}if(j.views!==undefined){for(k=0;k<j.views.length;k++){f=new c({el:b("#"+j.views[k]).el,id:j.views[k],nav:j.nav},h)}}if((e=g.lastIndexOf("#"))>-1){d=g.substring(e,g.length).replace("#","");if(d!==undefined){j.nav.set(d)}}}},a);b.extend({app:function(d){if(typeof d!=="object"){d={}}d.el=this.el;switch(d.type){default:return new a(d)}}},b)}(Mootor));